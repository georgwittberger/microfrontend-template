<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-concepts/caching-modules">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.1">
<title data-rh="true">Caching Modules | Microfrontend Template</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://georgwittberger.github.io/microfrontend-template/concepts/caching-modules"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Caching Modules | Microfrontend Template"><meta data-rh="true" name="description" content="Caching modules provided by microfrontends"><meta data-rh="true" property="og:description" content="Caching modules provided by microfrontends"><link data-rh="true" rel="canonical" href="https://georgwittberger.github.io/microfrontend-template/concepts/caching-modules"><link data-rh="true" rel="alternate" href="https://georgwittberger.github.io/microfrontend-template/concepts/caching-modules" hreflang="en"><link data-rh="true" rel="alternate" href="https://georgwittberger.github.io/microfrontend-template/concepts/caching-modules" hreflang="x-default"><link rel="stylesheet" href="/microfrontend-template/assets/css/styles.3949a624.css">
<link rel="preload" href="/microfrontend-template/assets/js/runtime~main.3434d600.js" as="script">
<link rel="preload" href="/microfrontend-template/assets/js/main.273ed0e1.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}return t}()||function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_ncxO" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/microfrontend-template/"><b class="navbar__title text--truncate">Microfrontend Template</b></a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/georgwittberger/microfrontend-template" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_EDmP"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_nHBA colorModeToggle_jEoN"><button class="clean-btn toggleButton_gmen toggleButtonDisabled_Zoqn" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_vSGv"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_JP4D"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_tp3Z"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_fl_v docsWrapper_ytDb"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_fFhq" type="button"></button><div class="docPage_WdUH"><aside class="theme-doc-sidebar-container docSidebarContainer_z7_f"><div class="sidebarViewport_Rl5r"><div class="sidebar_V2Af"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_FhEl"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/microfrontend-template/">Microfrontends</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/microfrontend-template/getting-started">Getting Started</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/microfrontend-template/category/concepts">Concepts</a><button aria-label="Toggle the collapsible sidebar category &#x27;Concepts&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/microfrontend-template/concepts/integration-contract">Integration Contract</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/microfrontend-template/concepts/microfrontend-react">Microfrontend using React</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/microfrontend-template/concepts/host-app-esmodule">Host Application using ES Modules</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/microfrontend-template/concepts/host-app-umd">Host Application using UMD Modules</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/microfrontend-template/concepts/host-app-react">Host Application using React</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/microfrontend-template/concepts/shared-libraries">Shared Libraries</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/microfrontend-template/concepts/caching-modules">Caching Modules</a></li></ul></li></ul></nav></div></div></aside><main class="docMainContainer_Pgl4"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_rctn"><div class="docItemContainer_dEmd"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z9gU" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/microfrontend-template/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_vGxT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/microfrontend-template/category/concepts"><span itemprop="name">Concepts</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Caching Modules</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ZGGv theme-doc-toc-mobile tocMobile_bAIR"><button type="button" class="clean-btn tocCollapsibleButton_VzJ9">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Caching Modules</h1><h2 class="anchor anchorWithStickyNavbar_FJPA" id="motivation">Motivation<a href="#motivation" class="hash-link" aria-label="Direct link to Motivation" title="Direct link to Motivation">​</a></h2><p>If users access a web application regularly it becomes inefficient to transfer all JavaScript und CSS resources on every visit given they have not changed. For faster loading times and avoiding unnecessary data transfer it is desirable to have browsers reuse JavaScript and CSS files they have already downloaded on a previous visit.</p><h2 class="anchor anchorWithStickyNavbar_FJPA" id="approaches">Approaches<a href="#approaches" class="hash-link" aria-label="Direct link to Approaches" title="Direct link to Approaches">​</a></h2><p>All common approaches utilize the browser&#x27;s <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Caching" target="_blank" rel="noopener noreferrer">HTTP caching</a> support. However, they differ in two aspects.</p><ul><li>Does the browser have to request the server even if it has a cached resource?</li><li>Does the URL of a certain resource change when its content changes?</li></ul><h3 class="anchor anchorWithStickyNavbar_FJPA" id="persistent-url-and-http-caching">Persistent URL and HTTP Caching<a href="#persistent-url-and-http-caching" class="hash-link" aria-label="Direct link to Persistent URL and HTTP Caching" title="Direct link to Persistent URL and HTTP Caching">​</a></h3><p>In this approach the URL of a resource does not change when it is updated on the server. Caching is accomplished by setting HTTP headers in the responses of microfrontend modules as follows.</p><div class="language-text codeBlockContainer_xNQZ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_rwCy"><pre tabindex="0" class="prism-code language-text codeBlock_vNka thin-scrollbar"><code class="codeBlockLines_ViEm"><span class="token-line" style="color:#393A34"><span class="token plain">Cache-Control: no-cache</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Last-Modified: Tue, 22 Feb 2022 20:20:20 GMT</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ETag: AAPuIbAOdvAGEETbgAAAAAAABAAE</span><br></span></code></pre><div class="buttonGroup_s1c6"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_J45_" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_zYXV"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Ylf7"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The <code>Cache-Control: no-cache</code> header tells the browser that it is allowed to store resources in its private cache but it must revalidate them with a server request before reusing them. <code>Last-Modified</code> indicates the date when the content in the response was generated on the server. <code>ETag</code> is a hash of the content in the response.</p><p>In the revalidation request the browser sends a <code>If-Modified-Since</code> header if <code>Last-Modified</code> was in the response and a <code>If-None-Match</code> header if <code>ETag</code> was in the response. The server checks whether the resource has changed since the given date or if its content produces a different hash. If the resource is still the same the server responds with status code <code>304 Not Modified</code> and does not send any content. The browser uses its cached resource. Otherwise, the server sends the new content in the revalidation response.</p><p>The benefit of this approach is that host applications do not have to adjust any import URLs or import maps when new microfrontend versions are deployed. It is also fairly easy to set up because almost every web server supports <code>Last-Modified</code> or <code>ETag</code> for static resources.</p><p>The caveat is that browsers have to send a server request for revalidation every time the microfrontend resource is required on a subsequent page visit. This can slightly delay rendering of microfrontends even when users have a fresh resource in their browser cache.</p><p>This approach may be easier to start with as long as you have control over HTTP caching headers in responses of microfrontend resources.</p><h3 class="anchor anchorWithStickyNavbar_FJPA" id="hashed-url-and-eternal-caching">Hashed URL and Eternal Caching<a href="#hashed-url-and-eternal-caching" class="hash-link" aria-label="Direct link to Hashed URL and Eternal Caching" title="Direct link to Hashed URL and Eternal Caching">​</a></h3><p>In this approach - also known as &quot;Cache busting&quot; - the URL of a resource changes every time it is updated on the server. Since this results in a new address for every version of the resource its content can be cached forever in the browser. This is accomplished by setting HTTP headers in the responses of microfrontend modules as follows.</p><div class="language-text codeBlockContainer_xNQZ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_rwCy"><pre tabindex="0" class="prism-code language-text codeBlock_vNka thin-scrollbar"><code class="codeBlockLines_ViEm"><span class="token-line" style="color:#393A34"><span class="token plain">Cache-Control: public, max-age=31536000, immutable</span><br></span></code></pre><div class="buttonGroup_s1c6"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_J45_" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_zYXV"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Ylf7"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The <code>Cache-Control</code> header tells the browser and intermediate gateways that resources can be stored in caches and reused without any revalidation. It is a promise that the content delivered by this particular URL is never going to change in the future. Once such a resource is cached in the browser it is reused instantly on every subsequent page visit.</p><p>The benefit of this approach is that it does not require any server requests for revalidation once users have the microfrontend resources locally. Microfrontends are rendered almost instantly in this case.</p><p>The caveat is that import URLs or import maps must be updated in host applications every time a microfrontend deploys a new version. This somehow counters the original idea of microfrontends not having to adjust anything in the host applications when microfrontends are updated. The authors of <a href="https://single-spa.js.org/docs/recommended-setup#deployment-and-continuous-integration-ci" target="_blank" rel="noopener noreferrer">single-spa describe a technique</a> which requires an additional <a href="https://github.com/single-spa/import-map-deployer" target="_blank" rel="noopener noreferrer">import-map-deployer</a> service in your deployment infrastructure to update import maps in a concurrent-safe way.</p><p>This approach may be suitable if you really want to avoid revalidation requests or you cannot control HTTP caching headers in responses of microfrontend resources, e.g. because you are using a CDN.</p></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/microfrontend-template/concepts/shared-libraries"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Shared Libraries</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_WyRm thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#motivation" class="table-of-contents__link toc-highlight">Motivation</a></li><li><a href="#approaches" class="table-of-contents__link toc-highlight">Approaches</a><ul><li><a href="#persistent-url-and-http-caching" class="table-of-contents__link toc-highlight">Persistent URL and HTTP Caching</a></li><li><a href="#hashed-url-and-eternal-caching" class="table-of-contents__link toc-highlight">Hashed URL and Eternal Caching</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2023 Georg Wittberger</div></div></div></footer></div>
<script src="/microfrontend-template/assets/js/runtime~main.3434d600.js"></script>
<script src="/microfrontend-template/assets/js/main.273ed0e1.js"></script>
</body>
</html>