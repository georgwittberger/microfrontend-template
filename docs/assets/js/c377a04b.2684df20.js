"use strict";(self.webpackChunkmicrofrontend_template_docs=self.webpackChunkmicrofrontend_template_docs||[]).push([[971],{9613:(e,t,r)=>{r.d(t,{Zo:()=>c,kt:()=>h});var o=r(9496);function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){n(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function s(e,t){if(null==e)return{};var r,o,n=function(e,t){if(null==e)return{};var r,o,n={},a=Object.keys(e);for(o=0;o<a.length;o++)r=a[o],t.indexOf(r)>=0||(n[r]=e[r]);return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)r=a[o],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}var p=o.createContext({}),l=function(e){var t=o.useContext(p),r=t;return e&&(r="function"==typeof e?e(t):i(i({},t),e)),r},c=function(e){var t=l(e.components);return o.createElement(p.Provider,{value:t},e.children)},d="mdxType",m={inlineCode:"code",wrapper:function(e){var t=e.children;return o.createElement(o.Fragment,{},t)}},u=o.forwardRef((function(e,t){var r=e.components,n=e.mdxType,a=e.originalType,p=e.parentName,c=s(e,["components","mdxType","originalType","parentName"]),d=l(r),u=n,h=d["".concat(p,".").concat(u)]||d[u]||m[u]||a;return r?o.createElement(h,i(i({ref:t},c),{},{components:r})):o.createElement(h,i({ref:t},c))}));function h(e,t){var r=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var a=r.length,i=new Array(a);i[0]=u;var s={};for(var p in t)hasOwnProperty.call(t,p)&&(s[p]=t[p]);s.originalType=e,s[d]="string"==typeof e?e:n,i[1]=s;for(var l=2;l<a;l++)i[l]=r[l];return o.createElement.apply(null,i)}return o.createElement.apply(null,r)}u.displayName="MDXCreateElement"},6515:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>p,contentTitle:()=>i,default:()=>m,frontMatter:()=>a,metadata:()=>s,toc:()=>l});var o=r(7366),n=(r(9496),r(9613));const a={slug:"/",sidebar_position:1},i="Microfrontends",s={unversionedId:"index",id:"index",title:"Microfrontends",description:"Overview",source:"@site/docs/index.md",sourceDirName:".",slug:"/",permalink:"/microfrontend-template/",draft:!1,tags:[],version:"current",sidebarPosition:1,frontMatter:{slug:"/",sidebar_position:1},sidebar:"sidebar",next:{title:"Getting Started",permalink:"/microfrontend-template/getting-started"}},p={},l=[{value:"Overview",id:"overview",level:2},{value:"Approaches",id:"approaches",level:2},{value:"ES Modules and Import Maps",id:"es-modules-and-import-maps",level:3},{value:"Module Federation",id:"module-federation",level:3},{value:"Composition Frameworks",id:"composition-frameworks",level:3}],c={toc:l},d="wrapper";function m(e){let{components:t,...a}=e;return(0,n.kt)(d,(0,o.Z)({},c,a,{components:t,mdxType:"MDXLayout"}),(0,n.kt)("h1",{id:"microfrontends"},"Microfrontends"),(0,n.kt)("h2",{id:"overview"},"Overview"),(0,n.kt)("p",null,(0,n.kt)("a",{parentName:"p",href:"https://micro-frontends.org/"},"Microfrontends")," is the concept of composing a web page from smaller frontend applications which can be deployed independently. The goal is to avoid rebuilding and deploying applications which have not changed and enabling separate teams to work on dedicated application parts independently with tools and frameworks of their choice."),(0,n.kt)("p",null,(0,n.kt)("img",{alt:"Microfrontends Overview",src:r(2522).Z,width:"596",height:"201"})),(0,n.kt)("p",null,"In the diagram above, assume that the HTML document of the web application is provided by an application developed by team 1. On the web page there is a partial application developed by team 2. This partial application can be integrated as a microfrontend so that team 2 can deploy changes without having to ask team 1 to deploy their web application."),(0,n.kt)("h2",{id:"approaches"},"Approaches"),(0,n.kt)("p",null,"Composition of the web page can be performed server-side or client-side."),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("strong",{parentName:"li"},"Server-side composition")," works by processing HTML documents with a special server application before they are sent to the browser. Such an application can perform server-side includes allowing one application to provide a document with placeholders and filling these gaps with content retrieved from other applications. While this may be a viable solution for mainly static content it is out of scope for this project template."),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("strong",{parentName:"li"},"Client-side composition")," works by processing HTML documents directly in the browser. One application - we call it the host application - serves the HTML document including some JavaScript code to dynamically load external JavaScript files required for partial applications and runs their code. These external microfrontend files can be updated independently. Such approaches are more suitable for highly interactive microfrontends and this project template focuses on this technique.")),(0,n.kt)("h3",{id:"es-modules-and-import-maps"},"ES Modules and Import Maps"),(0,n.kt)("p",null,"Modern JavaScript supports ",(0,n.kt)("a",{parentName:"p",href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/import"},"importing modules")," from remote sources. This is what we are going to use in this project template."),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-js"},'// Static import (works only inside <script type="module">)\nimport React from "https://esm.sh/react@18.2.0";\n\n// Dynamic import (works in any context)\nimport("https://esm.sh/react@18.2.0").then(({ default: React }) => {});\n')),(0,n.kt)("p",null,"To resolve bare module specifiers like ",(0,n.kt)("inlineCode",{parentName:"p"},'"react"')," the host application must define an ",(0,n.kt)("a",{parentName:"p",href:"https://developer.mozilla.org/en-US/docs/Web/HTML/Element/script/type/importmap"},"import map"),"."),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-html"},'<script type="importmap">\n  {\n    "imports": {\n      "react": "https://esm.sh/react@18.2.0"\n    }\n  }\n<\/script>\n<script type="module">\n  // Works only with import map\n  import React from "react";\n<\/script>\n')),(0,n.kt)("p",null,(0,n.kt)("a",{parentName:"p",href:"https://caniuse.com/mdn-javascript_statements_import"},"Module imports are supported very well")," in browsers these days. However, ",(0,n.kt)("a",{parentName:"p",href:"https://caniuse.com/import-maps"},"import maps have only landed recently")," in Firefox and Safari, so they might not be available to all users yet."),(0,n.kt)("p",null,"You can include ",(0,n.kt)("a",{parentName:"p",href:"https://github.com/guybedford/es-module-shims"},"es-module-shims")," in your host applicaton to polyfill import maps."),(0,n.kt)("h3",{id:"module-federation"},"Module Federation"),(0,n.kt)("p",null,(0,n.kt)("a",{parentName:"p",href:"https://webpack.js.org/"},"Webpack")," - a popular module bundler - introduced the concept of ",(0,n.kt)("a",{parentName:"p",href:"https://webpack.js.org/concepts/module-federation/"},"module federation"),". It is a proprietary solution requiring special plugins in the build processes of host applications and microfrontends."),(0,n.kt)("p",null,"Simplified, the builds of microfrontends generate special JavaScript bundles which can be loaded dynamically by the JavaScript code generated in the host application bundles. These host bundles incorporate a special loading mechanism which loads the microfrontend bundles from their remote sources as soon as they are required by the code."),(0,n.kt)("p",null,"There are plugins to make module federation work with other tools and frameworks."),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"https://www.npmjs.com/package/@originjs/vite-plugin-federation"},"Vite plugin")," for usage with Vite and even compatible with Webpack format."),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"https://www.npmjs.com/package/@module-federation/nextjs-mf"},"Next.js")," plugin is built on top of the Webpack plugin and supports server-side rendering.")),(0,n.kt)("h3",{id:"composition-frameworks"},"Composition Frameworks"),(0,n.kt)("p",null,"Some frameworks attempt to make the setup easier and solve specific challenges. However, they may be too much for simpler projects but are a great resource for learning."),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"https://single-spa.js.org/"},"single-spa")," orchestrates multiple SPAs within one host application and provides additional tooling for special use cases. Its article about the ",(0,n.kt)("a",{parentName:"li",href:"https://single-spa.js.org/docs/recommended-setup"},"recommended setup")," is fantastic to understand basic concepts."),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"https://qiankun.umijs.org/"},"qiankun")," is another composition framework which is built on top of single-spa.")))}m.isMDXComponent=!0},2522:(e,t,r)=>{r.d(t,{Z:()=>o});const o=r.p+"assets/images/microfrontends-overview.drawio-0d7ad5bb15cec8f75e98d410556cd78b.svg"}}]);