"use strict";(self.webpackChunkmicrofrontend_template_docs=self.webpackChunkmicrofrontend_template_docs||[]).push([[606],{9613:(e,t,n)=>{n.d(t,{Zo:()=>s,kt:()=>h});var o=n(9496);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t){if(null==e)return{};var n,o,r=function(e,t){if(null==e)return{};var n,o,r={},a=Object.keys(e);for(o=0;o<a.length;o++)n=a[o],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)n=a[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var p=o.createContext({}),l=function(e){var t=o.useContext(p),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},s=function(e){var t=l(e.components);return o.createElement(p.Provider,{value:t},e.children)},m="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return o.createElement(o.Fragment,{},t)}},u=o.forwardRef((function(e,t){var n=e.components,r=e.mdxType,a=e.originalType,p=e.parentName,s=c(e,["components","mdxType","originalType","parentName"]),m=l(n),u=r,h=m["".concat(p,".").concat(u)]||m[u]||d[u]||a;return n?o.createElement(h,i(i({ref:t},s),{},{components:n})):o.createElement(h,i({ref:t},s))}));function h(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var a=n.length,i=new Array(a);i[0]=u;var c={};for(var p in t)hasOwnProperty.call(t,p)&&(c[p]=t[p]);c.originalType=e,c[m]="string"==typeof e?e:r,i[1]=c;for(var l=2;l<a;l++)i[l]=n[l];return o.createElement.apply(null,i)}return o.createElement.apply(null,n)}u.displayName="MDXCreateElement"},4176:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>p,contentTitle:()=>i,default:()=>d,frontMatter:()=>a,metadata:()=>c,toc:()=>l});var o=n(7366),r=(n(9496),n(9613));const a={description:"Contract between host application and microfrontend",sidebar_position:1},i="Integration Contract",c={unversionedId:"concepts/integration-contract",id:"concepts/integration-contract",title:"Integration Contract",description:"Contract between host application and microfrontend",source:"@site/docs/concepts/integration-contract.md",sourceDirName:"concepts",slug:"/concepts/integration-contract",permalink:"/microfrontend-template/concepts/integration-contract",draft:!1,tags:[],version:"current",sidebarPosition:1,frontMatter:{description:"Contract between host application and microfrontend",sidebar_position:1},sidebar:"sidebar",previous:{title:"Concepts",permalink:"/microfrontend-template/category/concepts"},next:{title:"Microfrontend using React",permalink:"/microfrontend-template/concepts/microfrontend-react"}},p={},l=[{value:"Overview",id:"overview",level:2},{value:"Microfrontend Requirements",id:"microfrontend-requirements",level:2},{value:"Host Application Requirements",id:"host-application-requirements",level:2}],s={toc:l},m="wrapper";function d(e){let{components:t,...a}=e;return(0,r.kt)(m,(0,o.Z)({},s,a,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"integration-contract"},"Integration Contract"),(0,r.kt)("h2",{id:"overview"},"Overview"),(0,r.kt)("p",null,"With a growing number of host applications or microfrontends it becomes more important to standardize the way how they are integrated. This allows host applications to implement a generic solution to embed microfrontends. The approach should also be framework-agnostic so that teams can decide which libraries they want to use for building their applications."),(0,r.kt)("p",null,"Microfrontends should be deployable without having to deploy their host applications. The most general approach to make this happen is by hosting a separate JavaScript module which exports a mount function. Loading the microfrontend works as illustrated in the diagram below."),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"Integration Overview",src:n(4888).Z,width:"1847",height:"659"})),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"The browser requests the HTML document from host application."),(0,r.kt)("li",{parentName:"ol"},"The host application server provides the HTML document."),(0,r.kt)("li",{parentName:"ol"},"The host application puts a container element for the microfrontend in the HTML document."),(0,r.kt)("li",{parentName:"ol"},"The host application initiates a request to load a separate JavaScript module from the microfrontend server."),(0,r.kt)("li",{parentName:"ol"},"The microfrontend server provides the JavaScript module which exports a mount function."),(0,r.kt)("li",{parentName:"ol"},"The host application calls the mount function and passes it a reference to the container element.")),(0,r.kt)("p",null,"It is necessary that host applications and microfrontends agree on a standardized shape of the mount function and its behavior. The suggestion of this project template is described in the following sections."),(0,r.kt)("admonition",{type:"info"},(0,r.kt)("p",{parentName:"admonition"},"This project template provides a TypeScript declaration for its mount function convention in the workspace ",(0,r.kt)("inlineCode",{parentName:"p"},"packages/mfe-contract"),". You can import the type like this:"),(0,r.kt)("pre",{parentName:"admonition"},(0,r.kt)("code",{parentName:"pre",className:"language-ts"},'import type { MountFunction } from "mfe-contract";\n'))),(0,r.kt)("h2",{id:"microfrontend-requirements"},"Microfrontend Requirements"),(0,r.kt)("p",null,"Each microfrontend must provide its own mount function which allows host applications to render it in their pages."),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"The microfrontend provides a mount function as ",(0,r.kt)("a",{parentName:"li",href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/export"},"default export")," of a JavaScript module."),(0,r.kt)("li",{parentName:"ul"},"The first parameter of the function is the container element where the microfrontend should be mounted."),(0,r.kt)("li",{parentName:"ul"},"The second parameter of the function is an optional value to pass data from the host application to the microfrontend."),(0,r.kt)("li",{parentName:"ul"},"The function must render the microfrontend inside the given container element when it is called."),(0,r.kt)("li",{parentName:"ul"},"The function may return an object with two optional properties: ",(0,r.kt)("inlineCode",{parentName:"li"},"update")," and ",(0,r.kt)("inlineCode",{parentName:"li"},"unmount")),(0,r.kt)("li",{parentName:"ul"},"The ",(0,r.kt)("inlineCode",{parentName:"li"},"update")," function (if present) can be called by the host application to update the data passed to the microfrontend. It is expected that the microfrontend updates its state accordingly."),(0,r.kt)("li",{parentName:"ul"},"The ",(0,r.kt)("inlineCode",{parentName:"li"},"unmount")," function (if present) can be called by the host application to remove the microfrontend from the page. It is expected the the microfrontend does necessary cleanup, e.g. remove event listeners.")),(0,r.kt)("h2",{id:"host-application-requirements"},"Host Application Requirements"),(0,r.kt)("p",null,"Each host application must provide the foundation for loading and mounting microfrontends."),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"The host application renders the container element inside the HTML document."),(0,r.kt)("li",{parentName:"ul"},"The host application implements a loading mechanism to fetch the microfrontend JavaScript module as soon as it is required."),(0,r.kt)("li",{parentName:"ul"},"The host application calls the mount function exported from the JavaScript module as soon as the separate JavaScript file has been loaded."),(0,r.kt)("li",{parentName:"ul"},"The host application must pass a reference to the container element as first argument to the mount function."),(0,r.kt)("li",{parentName:"ul"},"The host application may pass an optional value as second argument to the mount function in order to provide data to the microfrontend."),(0,r.kt)("li",{parentName:"ul"},"The host application may keep the object returned by the mount function for as long as the entire page is not reloaded."),(0,r.kt)("li",{parentName:"ul"},"The host application may call the ",(0,r.kt)("inlineCode",{parentName:"li"},"update")," function (if present) in the returned object to pass new data to the microfrontend."),(0,r.kt)("li",{parentName:"ul"},"The host application may call the ",(0,r.kt)("inlineCode",{parentName:"li"},"unmount")," function (if present) in the returned object to remove the microfrontend from the page.")))}d.isMDXComponent=!0},4888:(e,t,n)=>{n.d(t,{Z:()=>o});const o=n.p+"assets/images/integration-overview.excalidraw-3c322840b32afc926424d3c6620e0c88.png"}}]);